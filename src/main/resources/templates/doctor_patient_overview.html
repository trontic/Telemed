<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="script.js"></script>
    <title>eDnevnik tlaka - Pacijentovi zapisi</title>
</head>
<body>

<div class="container mt-3 p-5 d-flex justify-content-center align-items-center ">
    <div class="row justify-content-center border rounded-4 p-5 bg-white shadow box-area">
        <div class="col-md-12">
            <div class="row p-3 mb-2 custom-bg text-white">
                <div class="col-auto me-auto">
                    <h4>eDnevnik tlaka</h4>
                    <span>Sučelje za liječnike</span>
                </div>
                <div class="col-auto ms-auto">
                    <span th:text="${currentUser.getFname()}"></span>
                    <span th:text="${currentUser.getLname()}"></span>
                    <span>, dr.med.</span>
                </div>
            </div>
            <div class="row mb-2">
                <div class="col-1">
                    <a href="patients">
                        <img src="images/back.png" class="img" style="width: 45px;">
                    </a>
                </div>
                <div class="col-1">
                    <a href="patients">
                        <img src="images/home.png" class="img" style="width: 45px;">
                    </a>
                </div>
                <div class="col-1 ms-auto me-5">
                    <button onclick="window.location.href='login'" class="btn btn-outline-danger" type="button">Odjava</button>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <h3>Pregled dnevnika tlaka</h3>
                </div>
                <div class="col-6">
                    <h5>Pregled kronične terapije</h5>
                </div>
            </div>
            <div class="row">
                <div class="col-6 left-block">
                    <form class="row mb-2">
                        <div class="row">
                            <div class="col-2 mb-2">
                                <label for="fname" class="col-form-label">Ime:</label>
                            </div>
                            <div class="col-auto mb-2">
                                <input th:value="${user.fname}" type="text" class="form-control" id="fname" name="fname" disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-2 mb-2">
                                <label for="lname" class="form-label">Prezime:</label>
                            </div>
                            <div class="col-auto mb-2">
                                <input th:value="${user.lname}" type="text" class="form-control" id="lname" name="lname" disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-2 mb-2">
                                <label for="birthday" class="form-label">Datum rođenja:</label>
                            </div>
                            <div class="col-auto mb-2">
                                <input th:value="${user.birthday}" type="text" class="form-control" id="birthday" name="birthday" disabled>
                            </div>
                        </div >
                        <div class="row">
                            <div class="col-2 mb-2">
                                <label for="mbo" class="form-label">MBO:</label>
                            </div>
                            <div class="col-auto mb-2">
                                <input th:value="${user.mbo}" type="text" class="form-control" id="mbo" name="mbo" disabled>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-6 right-block">
                    <table id="patients" class="table table-md table-borderless table-hover align-middle">
                        <thead>
                        <tr>
                            <th>Naziv lijeka</th>
                            <th>Kol.</th>
                            <th>Vrijeme primj.</th>
                        </tr>
                        </thead>
                        <tbody class="table-group-divider text-nowrap">
                        <tr th:each="therapy : ${therapyPlanList}">
                            <td th:text="${therapy.nameMedicine}">Primjer</td>
                            <td th:text="${therapy.quantity}">Primjer</td>
                            <td th:text="${therapy.dayPart}">Primjer</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <table id="patient" class="table table-md table-borderless table-hover align-middle">
                <thead>
                <tr>
                    <th>Datum</th>
                    <th>Vrijeme</th>
                    <th>Tlak sist.</th>
                    <th>Tlak dijast.</th>
                    <th>Puls</th>
                    <th>Bilješka</th>
                    <!--<th>Terapija</th>-->
                </tr>
                </thead>
                <tbody class="table-group-divider text-nowrap">
                <tr th:each="record : ${recordPage.content}" th:class="${record.emergency} ? 'table-danger' : ''">
                    <td th:text="${record.date}">Primjer</td>
                    <td th:text="${record.time}">Primjer</td>
                    <td th:text="${record.sysPressure}">Primjer</td>
                    <td th:text="${record.diasPressure}">Primjer</td>
                    <td th:text="${record.heartRate}">Primjer</td>
                    <td th:text="${record.note}" class="truncate" onmouseover="showFullText(event, this)">Primjer</td>
                    <input type="number" id="myElement" th:data-myvalue="${record.id}" hidden>
                    <!--<td><a><img src="images/pill.png" class="img-fluid" data-toggle="modal" data-target="#myModal" style="width: 20px;"></a></td> -->
                    <!--<td><button type="button" onclick="function()" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#myModal">Prikaži</button></td>-->
                </tr>
                </tbody>
            </table>

            <div id="pagination-container" class="d-flex justify-content-center" th:if="${recordPage.totalPages > 1}">
                <ul class="pagination">
                    <li th:if="${recordPage.hasPrevious}" class="page-item">
                        <a class="page-link" th:href="@{'/showPatientOverview?id=' + ${user.id} + '&page=' + ${recordPage.number - 1} + '#pagination-container'}">Prethodna</a>
                    </li>
                    <li th:each="i : ${#numbers.sequence(0, recordPage.totalPages - 1)}" class="page-item"
                        th:classappend="${i == recordPage.number} ? 'active'">
                        <a class="page-link" th:href="@{'/showPatientOverview?id=' + ${user.id} + '&page=' + *{i} + '#pagination-container'}" th:text="${i + 1}"></a>
                    </li>
                    <li th:if="${recordPage.hasNext}" class="page-item">
                        <a class="page-link" th:href="@{'/showPatientOverview?id=' + ${user.id} + '&page=' + ${recordPage.number + 1} + '#pagination-container'}">Sljedeća</a>
                    </li>
                </ul>
            </div>

            <div class="modal" id="myModal">
                <div class="modal-dialog">
                    <div class="modal-content">

                        <!-- Modal body -->
                        <div class="modal-body">
                            <table class="table table-striped align-middle">
                                <thead>
                                <tr>
                                    <th>Naziv lijeka</th>
                                    <th>Doza (mg)</th>
                                    <th>Količina</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="therapy : ${therapyList}">
                                    <td th:text="${therapy.nameMedicine}">Primjer</td>
                                    <td th:text="${therapy.dosage}">Primjer</td>
                                    <td th:text="${therapy.quantity}">Primjer</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>


                    </div>
                </div>
            </div>


        </div>
    </div>
</div>


</body>
</html>